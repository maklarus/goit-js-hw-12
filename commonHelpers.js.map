{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nconst gallery = document.querySelector('.gallery');\nconst instanse = new SimpleLightbox('.gallery a');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport function renderImgs(data) {\n  if (data.hits.length === 0) {\n    // gallery.innerHTML = '';\n    return;\n  }\n\n  const galleryTemplate = data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"flex-style\">\n          <div class=\"p-style\">\n            <p class=\"p1\">Likes</p>\n            <p class=\"p2\">${likes}</p>\n          </div>\n          <div class=\"p-style\">\n            <p class=\"p1\">Views</p>\n            <p class=\"p2\">${views}</p>\n          </div>\n          <div class=\"p-style\">\n            <p class=\"p1\">Comments</p>\n            <p class=\"p2\">${comments}</p>\n          </div>\n          <div class=\"p-style\">\n            <p class=\"p1\">Downloads</p>\n            <p class=\"p2\">${downloads}</p>\n          </div>\n        </div>\n      </li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n\n  if (gallery.childElementCount >= data.totalHits) {\n    loadMoreBtn.classList.add('is-hidden');\n    iziToast.info({\n      message: `We're sorry, but you've reached the end of search results.`,\n      position: 'topRight',\n    });\n  }\n\n  console.log(gallery.firstElementChild.getBoundingClientRect().height);\n\n  instanse.refresh();\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport axios from 'axios';\n\nimport { renderImgs } from './render-functions';\n\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\nconst API_KEY = '42570593-7f6e60f401c84611dfc2b0674';\nconst searchParams = new URLSearchParams({\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n});\n\nexport async function fetchImgs(query, amount, page) {\n  loader.classList.remove('is-hidden');\n\n  try {\n    const response = await axios.get(\n      `?key=${API_KEY}&q=${query}&${searchParams}&per_page=${amount}&page=${page}`\n    );\n\n    const data = response.data;\n\n    loadMoreBtn.classList.remove('is-hidden');\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      renderImgs(data);\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: `Bad request`,\n      position: 'topRight',\n    });\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n","import 'izitoast/dist/css/iziToast.min.css';\n\nimport iziToast from 'izitoast';\nimport { fetchImgs } from './js/pixabay-api';\n\nconst searchForm = document.querySelector('form');\nconst searchInput = document.querySelector('input[name=\"search\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nlet amount = 15;\nlet current_page;\nlet current_query;\n\nfunction smoothScroll() {\n  const galleryItemHeight =\n    gallery.firstElementChild.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: 3 * galleryItemHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction search(event) {\n  event.preventDefault();\n  gallery.innerHTML = null;\n\n  const query = searchInput.value.trim();\n\n  if (query === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter text into the input field.',\n      position: 'topRight',\n    });\n    return;\n  }\n  fetchImgs(query, amount, 1);\n\n  current_query = query;\n  current_page = 1;\n}\n\nsearchForm.addEventListener('submit', search);\n\nasync function loadMoreContent() {\n  current_page++;\n  await fetchImgs(current_query, amount, current_page);\n  // loadMoreBtn.scrollIntoView();\n\n  // Чомусь не відпрацьовує плавний скролл (проблема поширена)\n  smoothScroll();\n}\n\nloadMoreBtn.addEventListener('click', loadMoreContent);\n"],"names":["gallery","instanse","SimpleLightbox","loadMoreBtn","renderImgs","data","galleryTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast","loader","axios","API_KEY","searchParams","fetchImgs","query","amount","page","error","searchForm","searchInput","current_page","current_query","smoothScroll","galleryItemHeight","search","event","loadMoreContent"],"mappings":"owBAKA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,YAAY,EAC1CC,EAAc,SAAS,cAAc,YAAY,EAEhD,SAASC,EAAWC,EAAM,CAC/B,GAAIA,EAAK,KAAK,SAAW,EAEvB,OAGF,MAAMC,EAAkBD,EAAK,KAC1B,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,mBAEIL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,4BAKpBC,CAAK;AAAA;AAAA;AAAA;AAAA,4BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,4BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,4BAIRC,CAAS;AAAA;AAAA;AAAA,YAKhC,EACA,KAAK,EAAE,EAEVb,EAAQ,mBAAmB,YAAaM,CAAe,EAEnDN,EAAQ,mBAAqBK,EAAK,YACpCF,EAAY,UAAU,IAAI,WAAW,EACrCW,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAChB,CAAK,GAGH,QAAQ,IAAId,EAAQ,kBAAkB,sBAAqB,EAAG,MAAM,EAEpEC,EAAS,QAAO,CAClB,CC5DA,MAAMc,EAAS,SAAS,cAAc,SAAS,EACzCZ,EAAc,SAAS,cAAc,YAAY,EACvC,SAAS,cAAc,UAAU,EAEjDa,EAAM,SAAS,QAAU,0BACzB,MAAMC,EAAU,qCACVC,EAAe,IAAI,gBAAgB,CACvC,WAAY,QACZ,YAAa,aACb,WAAY,MACd,CAAC,EAEM,eAAeC,EAAUC,EAAOC,EAAQC,EAAM,CACnDP,EAAO,UAAU,OAAO,WAAW,EAEnC,GAAI,CAKF,MAAMV,GAJW,MAAMW,EAAM,IAC3B,QAAQC,CAAO,MAAMG,CAAK,IAAIF,CAAY,aAAaG,CAAM,SAASC,CAAI,EAChF,GAE0B,KAEtBnB,EAAY,UAAU,OAAO,WAAW,EAEnCE,EAAK,KAAK,OAQbD,EAAWC,CAAI,EAPfS,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,CAIJ,OAAQS,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBT,EAAS,MAAM,CACb,MAAO,QACP,QAAS,cACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRC,EAAO,UAAU,IAAI,WAAW,CACjC,CACH,CC9CA,MAAMS,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAc,SAAS,cAAc,sBAAsB,EAC3DtB,EAAc,SAAS,cAAc,YAAY,EACjDH,EAAU,SAAS,cAAc,UAAU,EAClC,SAAS,cAAc,SAAS,EAE/C,IAAIqB,EAAS,GACTK,EACAC,EAEJ,SAASC,GAAe,CACtB,MAAMC,EACJ7B,EAAQ,kBAAkB,sBAAuB,EAAC,OAEpD,OAAO,SAAS,CACd,IAAK,EAAI6B,EACT,KAAM,EACN,SAAU,QACd,CAAG,CACH,CAEA,SAASC,EAAOC,EAAO,CACrBA,EAAM,eAAc,EACpB/B,EAAQ,UAAY,KAEpB,MAAMoB,EAAQK,EAAY,MAAM,KAAI,EAEpC,GAAIL,IAAU,GAAI,CAChBN,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,UAChB,CAAK,EACD,MACD,CACDK,EAAUC,EAAOC,EAAQ,CAAC,EAE1BM,EAAgBP,EAChBM,EAAe,CACjB,CAEAF,EAAW,iBAAiB,SAAUM,CAAM,EAE5C,eAAeE,GAAkB,CAC/BN,IACA,MAAMP,EAAUQ,EAAeN,EAAQK,CAAY,EAInDE,GACF,CAEAzB,EAAY,iBAAiB,QAAS6B,CAAe"}